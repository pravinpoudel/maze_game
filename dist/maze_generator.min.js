"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,l=new Array(e.length);t<e.length;t++)l[t]=e[t];return l}}function ownKeys(t,e){var l=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),l.push.apply(l,r)}return l}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var l=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(l,!0).forEach(function(e){_defineProperty(t,e,l[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(l)):ownKeys(l).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(l,e))})}return t}function _defineProperty(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var w,canvas,ctx,isBreadcumbVisible,IMG,startPosition,endPosition,rows=3,cols=3,cellSet=[],wall_list=[],removedWallSet={},keyDown={},history=[];function processInput(e){keyDown.w&&canMove("w")&&0<player.y&&(history.push({x:player.x,y:player.y}),player.y=player.y-1),keyDown.a&&canMove("a")&&0<player.x&&(history.push(player.x*cols+player.y),player.x=player.x-1),keyDown.s&&canMove("s")&&player.y<rows-1&&(history.push({x:player.x,y:player.y}),player.y=player.y+1),keyDown.d&&canMove("d")&&player.x<cols-1&&(history.push({x:player.x,y:player.y}),player.x=player.x+1),keyDown.b&&(isBreadcumbVisible=!isBreadcumbVisible),keyDown={}}function canMove(e){var t={};"s"==e&&(t.x0=player.x,t.y0=player.y+1,t.x1=player.x+1,t.y1=player.y+1),"d"==e&&(t.x0=player.x+1,t.y0=player.y,t.x1=player.x+1,t.y1=player.y+1),"w"==e&&(t.x0=player.x,t.y0=player.y,t.x1=player.x+1,t.y1=player.y),"a"==e&&(t.x0=player.x,t.y0=player.y,t.x1=player.x,t.y1=player.y+1);for(var l=0;l<wall_list.length;l++)if(wall_list[l].x0==t.x0&&wall_list[l].y0==t.y0&&wall_list[l].x1==t.x1&&wall_list[l].y1==t.y1)return!1;return!0}function drawPlayer(){ctx.fillStyle="rgba(0, 255, 0, 1)",ctx.fillRect(player.x*w,player.y*w,w,w)}function showTrack(e){var l,r;ctx.fillStyle="#df7a12",e.forEach(function(e,t){ctx.beginPath(),l=e.x*w+w/2,r=e.y*w+w/2,ctx.arc(l,r,w/3,2*Math.PI,!1),ctx.fill()})}function randInt(e){return Math.floor(Math.random()*e)}function putBackground(){ctx.drawImage(img,0,0,img.width,img.height,0,0,canvas.width,canvas.height),ctx.fillStyle="#4aa1b0cc",ctx.fillRect(0,0,canvas.width,canvas.height)}function render(e){timeDiv.innerText=Math.floor(e/1e3)+" sec",ctx.clearRect(0,0,canvas.width,canvas.height),isBreadcumbVisible&&showTrack(history),drawPlayer(),drawStartAndEnd(startIndex,endIndex),findShortestPath(startPosition,endPosition),show()}function drawStartAndEnd(e,t){var l=Math.floor(e/cols),r=e%cols;console.log(r,l);var o=Math.floor(t/cols),a=t%cols;console.log(e,t),console.log(r,l,a,o),ctx.fillStyle="rgba(255, 0, 0, 1)",ctx.fillRect(a*w,o*w,w,w),ctx.fillStyle="rgba(0, 0, 0, 1)",ctx.fillRect(r*w,l*w,w,w)}function findShortestLength(e,r){var o,a,n=[],i=new Array(rows*cols).fill(-1);console.log(e),n.push(e),i[e]=0;for(var t=function(){var l=n.shift(),e=[l-1,l+1,l-cols,l+cols];e.filter(function(e,t){if(o=e+"_"+l,a=l+"_"+e,(removedWallSet.hasOwnProperty(o)||removedWallSet.hasOwnProperty(a))&&e<rows&&e<cols&&0<=e)return console.log(o,a),!0});for(var t=0;t<e.length;t++)if(-1==i[e[t]]&&(i[e[t]]=i[l]+1,n.push(e[t]),e[t]==r))return{v:i}};0<n.length;){var l=t();if("object"===_typeof(l))return l.v}}function findShortestPath(e,t){var l=findShortestLength(e,t);console.log(l);var r=t,o=[t],a=l[t];for(console.log(e,t);0<a;){a=l[r];var n=[r-1,r+1,r-cols,r+cols];n.filter(function(e,t){return comb1=e+"_"+r,comb2=r+"_"+e,console.log(comb1+"and"+comb2+"doesnot have wall"+removedWallSet.hasOwnProperty(comb1)||removedWallSet.hasOwnProperty(comb2)),(removedWallSet.hasOwnProperty(comb1)||removedWallSet.hasOwnProperty(comb2))&&e<rows&&e<cols&&0<=e});for(var i=0;i<n.length;i++)if(a--,l[n[i]]==a){o.push(n[i]);break}r=o[o.length-1]}for(var s=0,c=o.length;s<c;s++){var y=Math.floor(o[s]/cols),p=o[s]%cols;o[s]={x:p,y:y}}showTrack(o)}function setup(){canvas=document.getElementById("mazecanvas"),ctx=canvas.getContext("2d");var e=canvas.width,t=canvas.height;w=Math.floor(e/rows),h=Math.floor(t/cols),img=new Image,img.src="./background.jpg";for(var l=0;l<rows;l++)for(var r=0;r<cols;r++)cellSet.push([{index:l*cols+r,x:l,y:r}]);for(var o=0;o<rows;o++)for(var a=0;a<cols;a++){var n=o,i=a,s=o+1,c=a;wall_list.push({x0:n,y0:i,x1:s,y1:c}),s=o,c=a+1,wall_list.push({x0:n,y0:i,x1:s,y1:c})}for(var y=0,p=cols;y<rows;y++){var f=y,d=p,x=y+1,u=p;wall_list.push({x0:f,y0:d,x1:x,y1:u})}for(var v=0,g=rows;v<cols;v++){var b=g,m=v,S=g,_=v+1;wall_list.push({x0:b,y0:m,x1:S,y1:_})}}function mazeGeneration(){for(;1<cellSet.length;){var e=-1,t=-1,l=randInt(wall_list.length),r=void 0,o=void 0;if(wall_list[l].y0==wall_list[l].y1)for(var a=wall_list[l].x0,n=wall_list[l].y0,i=0;i<cellSet.length;i++)for(var s=0;s<cellSet[i].length;s++)cellSet[i][s].x==a&&cellSet[i][s].y==n&&(r=cellSet[e=i][s].index),cellSet[i][s].x==a&&cellSet[i][s].y==n-1&&(o=cellSet[t=i][s].index);if(wall_list[l].x0==wall_list[l].x1)for(var c=wall_list[l].x0,y=wall_list[l].y0,p=0;p<cellSet.length;p++)for(var w=0;w<cellSet[p].length;w++)cellSet[p][w].x==c-1&&cellSet[p][w].y==y&&(r=cellSet[e=p][w].index),cellSet[p][w].x==c&&cellSet[p][w].y==y&&(r=cellSet[t=p][w].index);if(0<=e&&0<=t&&e!=t){for(var f=0;f<cellSet[t].length;f++)cellSet[e][cellSet[e].length]=_objectSpread({},cellSet[t][f]);var d=o+"_"+r;removedWallSet[r+"_"+o]=!0,removedWallSet[d]=!0,wall_list.splice(l,1),cellSet.splice(t,1)}}}function show(){for(var e=0;e<wall_list.length;e++)start=[wall_list[e].x0*w,wall_list[e].y0*w],end=[wall_list[e].x1*w,wall_list[e].y1*w],drawLine(ctx,start,end,"white",6)}function drawLine(e,t,l){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"white",o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1;r&&(e.strokeStyle=r),o&&(e.lineWidth=o),e.beginPath(),e.moveTo.apply(e,_toConsumableArray(t)),e.lineTo.apply(e,_toConsumableArray(l)),e.stroke()}for(window.addEventListener("keydown",function(e){var t=e.key;keyDown[t]=!0}),setup(),mazeGeneration(),show();startPosition=randInt(cellSet[0].length),endPosition=randInt(cellSet[0].length),startPosition==endPosition;);console.log(startPosition,endPosition);var startIndex=cellSet[0][startPosition].index,endIndex=cellSet[0][endPosition].index;console.log("starting cell is "+startPosition+"end cell is "+endIndex);var trackValue=findShortestLength(startIndex,endIndex);console.log(startIndex);var startingTime,previousTime,playerY=Math.floor(startIndex/cols),playerX=startIndex%cols,player={x:playerX,y:playerY};console.log(player),ctx.fillStyle="rgba(0, 255, 0, 1)",ctx.fillRect(player.x*w,player.y*w,w,w);var timeDiv=document.getElementById("elapsedTime");function gameLoop(e){var t=e-(startingTime=startingTime||e);processInput(t),render(t)}gameLoop();
//# sourceMappingURL=maze_generator.min.js.map
